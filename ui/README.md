# 实验5： 图书管理系统数据库设计与界面设计

|     学号     |     班级     | 姓名 |
| :----------: | :----------: | :--: |
| 201710414128 | 软件(本)17-1 | 张鑫 |

## 1.数据库表设计

### 1.1. 图书表book

| 字段       | 类型         | 主键，外键 | 可以为空 | 默认值 | 约束      | 说明                      |
| ---------- | ------------ | ---------- | -------- | ------ | --------- | ------------------------- |
| bookid     | int(100)     | 主键       | 否       | 1      | 非空,自增 | 书籍编号                  |
| bookname   | varchar(100) |            | 否       |        | 非空      | 书名                      |
| bookauthor | varchar(100) |            | 是       |        |           | 图书作者                  |
| bookstatus | int(100)     |            | 否       | 1      | 非空      | 图书状态1(可用) 0(不可用) |
| bookdata   | datetime     |            | 是       |        |           | 图书日期                  |
| bookprice  | double(100)  |            | 是       |        |           | 图书价格                  |
| booknumber | integer(100) |            | 是       |        |           | 图书数量                  |

### 1.2. 读者表reader

| 字段           | 类型         | 主键，外键 | 可以为空 | 默认值 | 约束      | 说明     |
| -------------- | ------------ | ---------- | -------- | ------ | --------- | -------- |
| readerid       | int(100)     | 主键       | 否       | 1      | 非空,自增 | 读者编号 |
| readernickname | varchar(100) |            | 是       |        |           | 读者昵称 |
| readeraccount  | varchar(100) |            | 否       |        | 非空      | 读者账号 |
| readpassword   | varchar(100) |            | 否       |        | 非空      | 读者密码 |
| readeraddress  | varchar(100) |            | 是       |        |           | 读者地址 |
| readerphone    | varchar(100) |            | 是       |        |           | 读者电话 |

### 1.3系统管理员表systemadmin

| 字段 | 类型         | 主键，外键 | 可以为空 | 默认值 | 约束 | 说明 |
| ---- | ------------ | ---------- | -------- | ------ | ---- | ---- |
| adminid | int(100)     | 主键        | 否       | 1 | 非空，自增 | 管理员id |
| adminaccout | varchar(100) |            | 否       |        | 非空 | 管理员账号 |
| adminpassword | varchar(100) | | 否 | | 非空 | 管理员密码 |
| adminphone | varchar(100) |            | 是       |        |      | 管理员电话 |
| adminstatus | int(100) |            | 否 | 0 | 非空 | 管理员状态1(在线) 0(离线) |

### 1.4图书管理员表bookadmin

| 字段              | 类型         | 主键，外键 | 可以为空 | 默认值 | 约束       | 说明                          |
| ----------------- | ------------ | ---------- | -------- | ------ | ---------- | ----------------------------- |
| bookadminid       | int(100)     | 主键       | 否       | 1      | 非空，自增 | 图书管理员id                  |
| bookadminaccount  | varchar(100) |            | 否       |        | 非空       | 图书管理员账号                |
| bookadminpassword | varchar(100) |            | 否       |        | 非空       | 图书管理员密码                |
| bookadminphone    | varchar(100) |            | 是       |        |            | 图书管理员住址                |
| bookadminstatus   | int(100)     |            | 否       | 0      | 非空       | 图书管理员状态1(在线) 0(离线) |

### 1.5订单表order

| 字段             | 类型        | 主键，外键 | 可以为空 | 默认值 | 约束       | 说明                         |
| ---------------- | ----------- | ---------- | -------- | ------ | ---------- | ---------------------------- |
| orderid          | int(100)    | 主键       | 否       |        | 非空，自增 | 订单id                       |
| boughtbooknumber | int(100)    |            | 否       |        | 非空       | 购买的图书数量               |
| boughtbookprice  | double(100) |            | 是       |        |            | 购买的图书价格               |
| orderstatus      | int(100)    |            | 否       |        | 非空       | 订单状态 1(已完成) 0(未完成) |
| bookid           | int(100)    |            | 否       |        | 非空，外键 | 购买的图书编号               |

### 1.6借书表borrowbook

| 字段            | 类型         | 主键，外键 | 可以为空 | 默认值 | 约束       | 说明         |
| --------------- | ------------ | ---------- | -------- | ------ | ---------- | ------------ |
| borrowid        | int(100)     | 主键       | 否       |        | 非空，自增 | 借书记录id   |
| readerid        | int(100)     |            | 否       |        | 非空，外键 | 借书的读者id |
| borrowbookname  | varchar(100) |            | 否       |        | 非空，外键 | 借书书名     |
| borrowdate      | datetime     |            | 否       |        | 非空       | 借书日期     |
| availablenumber | int(100)     |            | 否       | 10     | 非空       | 可借数量     |

### 1.7还书表returnbook

| 字段           | 类型         | 主键，外键 | 可以为空 | 默认值 | 约束       | 说明         |
| -------------- | ------------ | ---------- | -------- | ------ | ---------- | ------------ |
| returnid       | int(100)     | 主键       | 否       |        | 非空，自增 | 还书记录id   |
| readerid       | int(100)     |            | 否       |        | 非空，外键 | 还书的读者id |
| returnbookname | varchar(100) |            | 否       |        | 非空，外键 | 还书书名     |
| returndate     | datetime     |            | 否       |        | 非空       | 还书日期     |

### 1.8预订表reversebook

| 字段          | 类型         | 主键，外键 | 可以为空 | 默认值 | 约束       | 说明         |
| ------------- | ------------ | ---------- | -------- | ------ | ---------- | ------------ |
| reverseid     | int(100)     | 主键       | 否       |        | 非空，自增 | 预订记录id   |
| readerid      | int(100)     |            | 否       |        | 非空，外键 | 预定的读者id |
| reversebookid | varchar(100) |            | 否       |        | 非空，外键 | 预定书名     |
| reversedate   | datetime     |            | 否       |        | 非空       | 预定日期     |
| reversenumber | int(100)     |            | 否       | 10     | 非空       | 可预订数量   |

## 2.界面设计

### 2.1. 借书界面设计

[借书界面地址请点击这里]( https://supertchain.github.io/is_analysis/test5/ui/index.html )

![借书界面](./Img/borrowbook.png)	

![成功界面](./Img/success.png)	

- 用例图参见：借书用例
- 类图参见：借书类，读者类
- 顺序图参见：借书顺序图

### 2.2.API接口设计

#### 功能一:查询图书

- 请求地址： http://book/v1/api/findBook
- 请求方法：POST
- 请求参数：

| 参数名称       | 必填 | 说明                           |
| -------------- | ---- | ------------------------------ |
| access_token   | 是   | 用于验证请求合法性的认证信息。 |
| method         | 是   | 固定为 “GET”。                 |
| borrowbookname | 是   | 借书的书名                     |

- 返回实例：

```
{
    "msg": "查询成功",
    "data": {
        "borrowbookname":"1"
        "book":[
        	{
        	 "bookid":"1",
			"bookname": "经济增长论",
			"bookauthor": "陈平",
			"bookstatus": "1",
			"bookdata": "2019",
			"bookprice": "75",
			"booknumber": "111"
          }
        ]
    },
    "code": 200
}
```

- 返回参数说明：

| 参数名称 | 说明                     |
| -------- | ------------------------ |
| msg      | 返回信息                 |
| data     | 图书实体类信息 |
| dodo     | 返回码                   |

#### 功能二:借出图书

- 功能：借出图书
- 请求地址： http://book/v1/api/borrowBook
- 请求方法：POST
- 请求参数：

|   参数名称   | 必填 |              说明              |
| :----------: | :--: | :----------------------------: |
| access_token |  是  | 用于验证请求合法性的认证信息。 |
|    method    |  是  |          默认为 get。          |
|    bookid    |  是  |           借阅图书id           |
|   readerid   |  是  |            读者编号            |

- 返回实例：

```
{
    "msg": "借书成功",
    "data": {
        "borrowdate":"2020/04/25"
        },
    "code": 200
}
```

- 返回参数说明：

| 参数名称 |       说明       |
| :------: | :--------------: |
|   msg    |     返回信息     |
|   data   | 成功后返回借书时间 |
|   code   |    返回状态码    |

